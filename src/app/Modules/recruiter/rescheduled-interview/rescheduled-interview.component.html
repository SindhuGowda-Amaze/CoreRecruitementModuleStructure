<!-- Product : DigiCoreRecrcitment System 1.0 
Date : 28 Jan, 2022
Author : Praveen,Sindhu,Anusha,Madhava
Description :this procedure Deletes the data in ClientMaster Table
Last Modified Date : 25 July , 2022
Last Modified Changes :   Added comments
Last Modified By : Madhava
Copyrights : AmazeINC-Bangalore-2022 -->



<!-- <app-spinner *ngIf="loader"></app-spinner> -->
<div class="container-fluid">
    <br>
    <div class="row">
        <div class="col-lg-12">
            <p class="Heading">RESCHEDULE INTERVIEWS DASHBOARD</p>
            <!-- <hr class="HrLine"> -->
        </div>
    </div> <br>

    <div class="card">
        <div class="row">
            
          
        </div>


        <div class="row FilterClass">       
            <div class="col-lg-1">           
                <p>Filter By</p>                 
        </div>   
            <!-- <div class="col-lg-2">
                <select  class="form-control form-select poppinns" [(ngModel)]="hiringManager"
                    (change)="GetJobRequirements()">
                    <option value="">Select Hiring Manager</option>
                    <option *ngFor="let hr of hrlist" value="{{hr.name}}">{{hr.name}}</option>
            </select>                 
            </div> -->
            <div class="ol-lg-2">
                <input  type="date" style="color:#0C275A;" class="form-control poppinns"
                name="Date" value="Date" [(ngModel)]="Date">
            </div>
            <div class="col-lg-2">
                <input  type="date" style="color:#0C275A;" class="form-control poppinns"
                (change)="changeAnniversary()" name="endDate" value="endDate" [(ngModel)]="endDate">
            </div>

            <div class="col-lg-2">
                <select name="Select" class="form-control poppinns" (change)="changeoption()"
                    [(ngModel)]="searchbynotice">
                    <option value="" style="color:#0C275A;">Select Notice Period</option>
                    <option style="color:#0C275A;" *ngFor="let job of noticeperiodlist" value="{{job.noticePeriod}}">
                        {{job.noticePeriod}}</option>
                </select>
            </div>
            <div class="col-lg-2">
                <input class="form-control poppinns" placeholder="Search" [(ngModel)]="search" name="search"
                    (ngModelChange)="Filterjobs()">
            </div>
            
                <div class="col-lg-2">
                    <select class="form-control" id="Role" name="Role" [(ngModel)]="Role" (change)="GetJobDescription()">
                        <option value="">Select Job Title</option>
                        <option value="{{vendor.id}}" *ngFor="let vendor of staffdetails">
                          {{vendor.role}}
                        </option>
                      </select>
                </div>

                <div class="col-lg-1"><p class="Count" >Count:{{count}}</p>  </div>
                      
            <!-- <div class="col-lg-2"></div> -->
                
        </div>

        <!-- <div class="row">
            <div class="col=lg-1"></div>
            <div class="col-lg-11">
                   
            </div>
        </div> -->
  

         
    </div><br> 



    <div class="row">
        <div class="col-lg-12" style="height: 470px; overflow-y: scroll;">
            <table class="table tablebordered">
                <thead>
                    <tr>
                        <!-- <th>Vendor</th> -->
                        <th>Job Reference ID</th>
                        <th>Interview Date</th>
                        <th>Source</th>
                        <th *ngIf="roleid!=2">Hiring Manager</th>
                        <!-- <th>Time</th> -->
                        <th *ngIf="roleid!=5"> Interview Canceled by </th>
                        <!-- <th>Tentitive Joining Date</th> -->
                        <th>Job Title</th>
                        <th>Candidate Name</th>
                        <th>Phone No</th>
                        <th>Email</th>
                        <th>Total Years of Experience</th>
                        <th>Resume</th>
                        <!-- <th>Relevant Experience</th> -->
                        <!-- <th>CTC Budget</th> -->
                        <th>Notice Period</th>
                        <th>Cancle Comments</th>
                        <th>Budget Status</th>
                        <!-- <th>Interviewer Feedback</th> -->
                        <th *ngIf="roleid!='4' && roleid=='6'">Actions</th>
                    </tr>
                    <tr *ngFor="let job of joblist | paginate: { itemsPerPage: count1, currentPage: p }">
                        <td>{{job.jobRefernceID}}</td>
                        <td>{{job.date|date}}</td>
                        <td>{{job.source}}</td>
                        <!-- <td>{{job.slotTime}}</td> -->
                        <td *ngIf="roleid!=2">{{job.hiringManager}}</td>
                        <td *ngIf="roleid!=5">{{job.staffname}}</td>
                     
                        <td>{{job.jobTitle}}</td>
                        <td>{{job.candidateName}}</td>
                        <td>{{job.phoneNo}}</td>
                        <td>{{job.email}}</td>
                        <td>{{job.yearsofExp}}</td>

                        <td>
                            <img src="assets/Images/pdf.png" style="width: 30px;"
                                (click)="GetOfferLetter(job.resumeUrl)">
                        </td>
                        <!-- <td>{{job.relavantExp}}</td>   -->
                        <!-- <td>{{job.ctc}}</td>  -->
                        <td>{{job.noticePeriod}}</td>
                        <td>{{job.canclecomments}}</td>

                        <td>
                            <p *ngIf="job.budgetStatus==null">Waiting for Approval</p>
                            <p *ngIf="job.budgetStatus!=null">{{job.budgetStatus}}</p>
                        </td>
                        <td *ngIf="roleid!='4' && roleid=='6'">
                            <button class="btn btn-primary" data-toggle="modal" data-target="#exampleModal"
                              (click)="GetCandidateID(job.id)">
                              Reschedule Interview
                            </button>
              
                            <!-- <img src="assets/images/acc.png" *ngIf="job.accept=='0'&&job.reject=='0'" tilte="Accept"
                                      style="width:20px;" (click)="Accept(job.id)" />&nbsp;
              
                                  <img src="assets/images/can.png" *ngIf="job.accept=='0'&&job.reject=='0'" tilte="Reject"
                                      style="width:20px;" (click)="Reject(job.id)" /> -->
                          </td>
                    </tr>
                </thead>
            </table>
            <!-- <ng-template #noResults>
                        <p>no results found for "{{search}}" </p> 
                      </ng-template> -->
        </div>
        <div class="text-right">
            <br>
            <pagination-controls (pageChange)="p = $event" class="poppinns"></pagination-controls>
        </div>
        <!-- <span *ngIf="joblist.length==0">No data found.</span> -->
        <br>
    </div>

</div>






<div class="modal fade" id="exampleModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="width:700px">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Notes</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-3">
                        <label class="Letter">Joining Date : <span style="color: red;">*</span></label>
                    </div>
                    <div class="col-lg-6">
                        <input type="date" [(ngModel)]="date" name="date" class="form-control">
                    </div>

                </div><br>
                <div class="row">
                    <div class="col-lg-3">
                        <label class="Letter">Joining Bonus : <span style="color: red;">*</span></label>
                    </div>
                    <div class="col-lg-6">
                        <!-- <textarea class="form-control" rows="4" placeholder="Notes" [(ngModel)]="joiningbonus" name="offernotes"></textarea> -->

                        <input type="text" [(ngModel)]="joiningbonus" name="joiningbonus" class="form-control"
                            placeholder="Joining Bonus">
                    </div>
                </div><br>

                <div class="row">
                    <div class="col-lg-3">
                        <label class="Letter">Notice Period By then : <span style="color: red;">*</span></label>
                    </div>
                    <div class="col-lg-6">
                        <!-- <textarea class="form-control" rows="4" placeholder="Notes" [(ngModel)]="joiningbonus" name="offernotes"></textarea> -->

                        <input type="text" [(ngModel)]="noticeperiodbythen" name="noticeperiodbythen"
                            class="form-control" placeholder="Notice Period By then">
                    </div>
                </div><br>
                <div class="row">
                    <div class="col-lg-3">
                        <label class="Letter">Notes : <span style="color: red;">*</span></label>
                    </div>
                    <div class="col-lg-6">
                        <!-- <textarea class="form-control" rows="4" placeholder="Notes" [(ngModel)]="joiningbonus" name="offernotes"></textarea> -->


                        <textarea rows="4" [(ngModel)]="Notes" name="Notes" class="form-control"
                            placeholder="Notes"></textarea>
                        <!-- <input type="text"> -->
                    </div>
                </div><br>
                <div class="row">
                    <div class="col-lg-5">

                    </div>
                    <div class="col-lg-2">
                        <button type="button" class="btn btn-primary" (click)="updatejoiningdate()"
                            data-dismiss="modal">Save</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

            </div>
        </div>
    </div>
</div>








<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content" style="width:700px">
      <div class="modal-header">
        <h5 class="modal-title Heading" id="exampleModalLabel">Reschedule Interview</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-lg-3">
            <label>Staff : <span style="color: red;">*</span></label>
          </div>
          <div class="col-lg-6">
            <select class="form-control" (change)="GetStaffID($event)">
              <option value="">Select</option>
              <option *ngFor="let staff of stafflist" value="{{staff.id}}">{{staff.name}}</option>
            </select>
          </div>
        </div><br>
        <div class="row">
          <div class="col-lg-3"></div>
          <!-- <div class="col-lg-4">
            <button type="button" class="btn btn-primary"  (click)="checkschedule()"
            data-dismiss="modal">Check Interviwer Schedule</button>
          </div> -->
        </div><br>
        <div class="row">
          <div class="col-lg-3">
            <label>Date : <span style="color: red;">*</span></label>
          </div>
          <div class="col-lg-6">
            <input type="date" class="form-control" [(ngModel)]="date" name="date" (change)="GetDate($event)">
          </div>
        </div><br>
     <br>
       
        <br>
        <div class="row">
          <div class="col-lg-3">
            <label>Time : <span style="color: red;">*</span></label>
          </div>
          <div class="col-lg-6">
            <select class="form-control" (change)="GetTimeID($event)">
              <option value="">Select</option>
              <option *ngFor="let time of slotslist" value="{{time.id}}">{{time.slotTime}}</option>
            </select>
          </div>
        </div><br>
        <div class="row">
          <div class="col-lg-3">
            <label>Notes : <span style="color: red;">*</span></label>
          </div>
          <div class="col-lg-6">
            <textarea class="form-control" rows="4" placeholder="Notes" [(ngModel)]="notes" name="notes"></textarea>
          </div>
        </div><br>
        <!-- <div class="row">
          <div class="col-lg-3">
            <label>Interview Guid : <span style="color: red;">*</span></label>
          </div>
          <div class="col-lg-6">
            <ngx-dropzone (change)="onSelect($event)" style="height: 60px;">
              <ngx-dropzone-label>Drop it here!</ngx-dropzone-label>
              <ngx-dropzone-preview *ngFor="let f of files" [removable]="true" (removed)="onRemove(f)">
                <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
              </ngx-dropzone-preview>
            </ngx-dropzone>
          </div>
        </div><br> -->
        <div class="row">
          <div class="col-lg-5">

          </div>
          <div class="col-lg-2">
            <button type="button" class="btn btn-primary" (click)="UpdateInterviewSchedule()"
              data-dismiss="modal">Schedule</button>
          </div>
          <br>
        </div>

        <div class="row">
          <div class="col-lg-5">

          </div>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

        </div>
      </div>
    </div>
  </div>


